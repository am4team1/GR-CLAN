<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - GR CLAN</title>
    <link rel="stylesheet" href="css/colors.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        .login-page {
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }
        
        /* Ø­Ø§ÙˆÙŠØ© Ø£ÙƒØ¨Ø± Ù„Ø§Ø­ØªÙˆØ§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .login-wrapper {
            min-height: 600px;
            max-height: 90vh;
            overflow-y: auto;
            width: 100%;
            max-width: 500px;
            padding: 20px;
        }
        
        /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù„ØªÙ…Ø±ÙŠØ± */
        .auth-form {
            min-height: 400px;
        }
        
        /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© */
        .back-home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
        
        /* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            display: none;
            z-index: 1001;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: slideInRight 0.3s ease;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø­Ù‚Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .data-input {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(212,175,55,0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .data-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 10px rgba(212,175,55,0.3);
        }
        
        /* ØªÙ„Ù…ÙŠØ­Ø§Øª */
        .form-tip {
            color: var(--gold);
            font-size: 0.9rem;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .form-tip::before {
            content: "ğŸ’¡";
        }
        
        /* Ø²Ø± Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± */
        .forgot-password-btn {
            background: rgba(212,175,55,0.1);
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .forgot-password-btn:hover {
            background: var(--gold);
            color: var(--dark-blue);
        }
        
        /* Ø§Ø®ØªØ¨Ø§Ø± Ø¨ÙŠØ§Ù†Ø§Øª */
        .test-credentials {
            background: rgba(212,175,55,0.05);
            border: 1px dashed var(--gold);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .test-credentials h4 {
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .test-credential {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            font-family: monospace;
        }
    </style>
</head>
<body class="auth-page login-page">
    <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <a href="index.html" class="back-home-btn">
        <span>ğŸ </span>
        Ø§Ù„Ø¹ÙˆØ¯Ø©
    </a>
    
    <!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="notification" class="notification"></div>
    
    <!-- Ø­Ø§ÙˆÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div class="login-wrapper">
        <div class="auth-container">
            <!-- Ø§Ù„Ø±Ø£Ø³ -->
            <div class="auth-header">
                <div class="clan-logo-small">
                    <img src="assets/images/clan-logo.png" alt="Ø´Ø¹Ø§Ø± GR CLAN" style="width: 60px; height: 60px; border-radius: 50%;">
                </div>
                <h1 class="auth-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
                <p class="auth-subtitle">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ GR CLAN</p>
            </div>
            
            <!-- Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <form id="loginForm" class="auth-form">
                <!-- Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                <div class="form-group">
                    <label for="loginUsername" class="form-label">
                        Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    </label>
                    <input 
                        type="text" 
                        id="loginUsername" 
                        class="form-input"
                        placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ"
                        required
                    >
                    <div class="input-error" id="usernameError"></div>
                    <div class="form-tip">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø¬Ù„</div>
                </div>
                
                <!-- ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
                <div class="form-group">
                    <label for="loginPassword" class="form-label">
                        ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                    </label>
                    <div class="password-container">
                        <input 
                            type="password" 
                            id="loginPassword" 
                            class="form-input password-input"
                            placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ"
                            required
                        >
                        <button type="button" class="toggle-password" id="togglePassword">
                            ğŸ‘ï¸
                        </button>
                    </div>
                    <div class="input-error" id="passwordError"></div>
                    
                    <!-- Ø®ÙŠØ§Ø±Ø§Øª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
                    <div class="form-options">
                        <div class="form-option">
                            <input type="checkbox" id="showPasswordCheck">
                            <label for="showPasswordCheck">Ø¥Ø¸Ù‡Ø§Ø± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        </div>
                        
                        <button type="button" class="forgot-password-btn" id="forgotPasswordBtn">
                            Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ
                        </button>
                    </div>
                </div>
                
                <!-- ØªØ°ÙƒØ±Ù†ÙŠ -->
                <div class="form-option" style="margin: 20px 0;">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe">ØªØ°ÙƒØ±Ù†ÙŠ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²</label>
                </div>
                
                <!-- Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
                <button type="submit" class="submit-btn" id="loginSubmitBtn">
                    <span class="btn-icon">ğŸ”</span>
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </button>
                
                <!-- Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
                <div class="test-credentials">
                    <h4>ğŸ“‹ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±:</h4>
                    <div class="test-credential">ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: test_user</div>
                    <div class="test-credential">ğŸ” ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: 123456</div>
                    <div class="test-credential">ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: player1</div>
                    <div class="test-credential">ğŸ” ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: password123</div>
                </div>
                
                <!-- Ø±Ø§Ø¨Ø· Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ -->
                <div class="auth-link">
                    <p>Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="register.html">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</a></p>
                </div>
            </form>
        </div>
        
        <!-- ØªØµÙ…ÙŠÙ… Ø®Ù„ÙÙŠØ© -->
        <div class="auth-design">
            <div class="design-element de1"></div>
            <div class="design-element de2"></div>
            <div class="design-element de3"></div>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script>
        // ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
        function initializeTestData() {
            let users = JSON.parse(localStorage.getItem('users')) || [];
            
            // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
            const testUsers = [
                { username: 'test_user', password: '123456', pubgId: '5123456789' },
                { username: 'player1', password: 'password123', pubgId: '5123456790' }
            ];
            
            testUsers.forEach(testUser => {
                if (!users.find(user => user.username === testUser.username)) {
                    users.push({
                        id: Date.now() + Math.random(),
                        username: testUser.username,
                        password: testUser.password,
                        pubgId: testUser.pubgId,
                        joinDate: new Date().toISOString()
                    });
                }
            });
            
            localStorage.setItem('users', JSON.stringify(users));
        }
        
        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        initializeTestData();
        
        // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        const passwordInput = document.getElementById('loginPassword');
        const togglePassword = document.getElementById('togglePassword');
        const showPasswordCheck = document.getElementById('showPasswordCheck');
        
        togglePassword.addEventListener('click', function() {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ';
        });
        
        showPasswordCheck.addEventListener('change', function() {
            if (this.checked) {
                passwordInput.setAttribute('type', 'text');
                togglePassword.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.setAttribute('type', 'password');
                togglePassword.textContent = 'ğŸ‘ï¸';
            }
        });
        
        // Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø±
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            notification.style.background = type === 'success' ? 'var(--success)' : 'var(--error)';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Ù…Ø³Ø­ Ø£Ø®Ø·Ø§Ø¡ Ø³Ø§Ø¨Ù‚Ø©
            clearErrors();
            
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            let hasError = false;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            if (!username) {
                showError('usernameError', 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                hasError = true;
            } else if (username.length < 3) {
                showError('usernameError', 'âš ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                hasError = true;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
            if (!password) {
                showError('passwordError', 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
                hasError = true;
            } else if (password.length < 6) {
                showError('passwordError', 'âš ï¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                hasError = true;
            }
            
            if (!hasError) {
                // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
                const submitBtn = document.getElementById('loginSubmitBtn');
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<span class="btn-icon">â³</span> Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...';
                
                // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ù„Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
                setTimeout(() => {
                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    const user = users.find(u => u.username === username && u.password === password);
                    
                    if (user) {
                        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø§Ø¬Ø­
                        localStorage.setItem('currentUser', JSON.stringify({
                            username: user.username,
                            pubgId: user.pubgId,
                            joinDate: user.joinDate
                        }));
                        
                        // Ø¥Ø°Ø§ Ø·Ù„Ø¨ ØªØ°ÙƒØ±Ù†ÙŠ
                        if (rememberMe) {
                            localStorage.setItem('rememberedUser', JSON.stringify({
                                username: user.username,
                                timestamp: Date.now()
                            }));
                        }
                        
                        showNotification('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                        
                        // ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                        setTimeout(() => {
                            window.location.href = 'main.html';
                        }, 1500);
                        
                    } else {
                        showError('passwordError', 'âŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<span class="btn-icon">ğŸ”</span> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
                    }
                }, 1000);
            }
        });
        
        // Ø²Ø± Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        document.getElementById('forgotPasswordBtn').addEventListener('click', function() {
            const username = document.getElementById('loginUsername').value.trim();
            
            if (!username) {
                showNotification('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.username === username);
            
            if (user) {
                showNotification(`ğŸ”‘ ØªÙ„Ù…ÙŠØ­: ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù€ ${username} ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ${user.password.length} Ø­Ø±Ù`, 'success');
            } else {
                showNotification('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', 'error');
            }
        });
        
        // Ù…Ù„Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡Ø§
        document.querySelectorAll('.test-credential').forEach(credential => {
            credential.addEventListener('click', function() {
                const text = this.textContent.trim();
                
                if (text.includes('ğŸ‘¤')) {
                    document.getElementById('loginUsername').value = text.split(':')[1].trim();
                } else if (text.includes('ğŸ”')) {
                    document.getElementById('loginPassword').value = text.split(':')[1].trim();
                }
            });
        });
        
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
            
            // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ø§Ø³ Ø®Ø·Ø£ Ù„Ù„Ø­Ù‚Ù„
            const inputId = elementId.replace('Error', '');
            const inputElement = document.getElementById(inputId);
            if (inputElement) {
                inputElement.classList.add('error');
            }
        }
        
        function clearErrors() {
            const errorElements = document.querySelectorAll('.input-error');
            errorElements.forEach(el => {
                el.textContent = '';
                el.style.display = 'none';
            });
            
            const inputs = document.querySelectorAll('.form-input');
            inputs.forEach(input => {
                input.classList.remove('error');
            });
        }
        
        // Ù…Ø³Ø­ Ø§Ù„Ø®Ø·Ø£ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('input', function() {
                this.classList.remove('error');
                const errorId = this.id + 'Error';
                const errorElement = document.getElementById(errorId);
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
            });
        });
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª ØªØ°ÙƒØ±Ù†ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', function() {
            const remembered = localStorage.getItem('rememberedUser');
            if (remembered) {
                const userData = JSON.parse(remembered);
                const oneWeek = 7 * 24 * 60 * 60 * 1000; // Ø£Ø³Ø¨ÙˆØ¹ ÙˆØ§Ø­Ø¯
                
                if (Date.now() - userData.timestamp < oneWeek) {
                    document.getElementById('loginUsername').value = userData.username;
                    document.getElementById('rememberMe').checked = true;
                } else {
                    localStorage.removeItem('rememberedUser');
                }
            }
        });
    </script>
</body>
</html>
