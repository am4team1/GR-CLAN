<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ - GR CLAN</title>
    <link rel="stylesheet" href="css/colors.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ØªØµÙ…ÙŠÙ… Ø®Ø§Øµ Ø¨ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
        .register-page {
            background: linear-gradient(135deg, #0A1931 0%, #162447 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .register-container {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px 30px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }
        
        .register-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .register-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            border: 3px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.4);
        }
        
        .register-logo img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .register-title {
            color: var(--gold);
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .register-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
        .register-form .form-group {
            margin-bottom: 20px;
        }
        
        .register-form .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--gold);
            font-weight: 600;
        }
        
        .register-form .form-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .register-form .form-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }
        
        .register-form .form-input.error {
            border-color: var(--error);
            background: rgba(255, 71, 87, 0.1);
        }
        
        .password-container {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: var(--gold);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
        }
        
        .error-message {
            color: var(--error);
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }
        
        /* Ù…Ø¤Ø´Ø± Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± */
        .password-strength {
            display: flex;
            gap: 3px;
            margin-top: 10px;
        }
        
        .strength-bar {
            height: 4px;
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .strength-text {
            font-size: 0.8rem;
            margin-top: 5px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        /* Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
        .register-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            border: none;
            border-radius: 10px;
            color: var(--dark-blue);
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .register-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }
        
        .register-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* Ø§Ù„Ø±ÙˆØ§Ø¨Ø· */
        .register-link {
            text-align: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .register-link a {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
        }
        
        .register-link a:hover {
            text-decoration: underline;
        }
        
        /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(212, 175, 55, 0.2);
            border: 2px solid var(--gold);
            color: var(--gold);
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .back-btn:hover {
            background: var(--gold);
            color: var(--dark-blue);
            transform: translateX(-5px);
        }
        
        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ */
        .alert {
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alert-success {
            background: rgba(46, 213, 115, 0.2);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .alert-error {
            background: rgba(255, 71, 87, 0.2);
            border: 1px solid var(--error);
            color: var(--error);
        }
    </style>
</head>
<body class="register-page">
    <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© -->
    <a href="index.html" class="back-btn">
        <span>ğŸ </span>
        Ø§Ù„Ø¹ÙˆØ¯Ø©
    </a>
    
    <!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="register-container">
        <!-- Ø§Ù„Ø±Ø£Ø³ -->
        <div class="register-header">
            <div class="register-logo">
                <img src="assets/images/clan-logo.png" alt="GR CLAN">
            </div>
            <h1 class="register-title">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h1>
            <p class="register-subtitle">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ GR CLAN Ø§Ù„Ø¢Ù†</p>
        </div>
        
        <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ -->
        <div id="alert" class="alert"></div>
        
        <!-- Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ -->
        <form id="registerForm" class="register-form">
            <!-- Ù…Ø¹Ø±Ù Ø§Ù„Ø¨Ø¨Ø¬ÙŠ -->
            <div class="form-group">
                <label for="pubgId" class="form-label">Ù…Ø¹Ø±Ù Ø§Ù„Ø¨Ø¨Ø¬ÙŠ</label>
                <input 
                    type="text" 
                    id="pubgId" 
                    class="form-input"
                    placeholder="Ø£Ø¯Ø®Ù„ 10 Ø£Ø±Ù‚Ø§Ù…"
                    maxlength="10"
                    required
                >
                <div id="pubgIdError" class="error-message"></div>
                <small style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">Ù…Ø«Ø§Ù„: 5123456789</small>
            </div>
            
            <!-- Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
            <div class="form-group">
                <label for="username" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input 
                    type="text" 
                    id="username" 
                    class="form-input"
                    placeholder="Ø§Ø®ØªØ± Ø§Ø³Ù…Ù‹Ø§ ÙØ±ÙŠØ¯Ù‹Ø§"
                    minlength="3"
                    maxlength="20"
                    required
                >
                <div id="usernameError" class="error-message"></div>
            </div>
            
            <!-- ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
            <div class="form-group">
                <label for="password" class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <div class="password-container">
                    <input 
                        type="password" 
                        id="password" 
                        class="form-input"
                        placeholder="6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„"
                        minlength="6"
                        required
                    >
                    <button type="button" class="toggle-password" data-target="password">ğŸ‘ï¸</button>
                </div>
                <div id="passwordError" class="error-message"></div>
                
                <!-- Ù…Ø¤Ø´Ø± Ø§Ù„Ù‚ÙˆØ© -->
                <div class="password-strength">
                    <div class="strength-bar" id="strength1"></div>
                    <div class="strength-bar" id="strength2"></div>
                    <div class="strength-bar" id="strength3"></div>
                    <div class="strength-bar" id="strength4"></div>
                </div>
                <div class="strength-text" id="strengthText">Ø¶Ø¹ÙŠÙØ©</div>
            </div>
            
            <!-- ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
            <div class="form-group">
                <label for="confirmPassword" class="form-label">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <div class="password-container">
                    <input 
                        type="password" 
                        id="confirmPassword" 
                        class="form-input"
                        placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                        required
                    >
                    <button type="button" class="toggle-password" data-target="confirmPassword">ğŸ‘ï¸</button>
                </div>
                <div id="confirmPasswordError" class="error-message"></div>
            </div>
            
            <!-- Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· -->
            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="agreeTerms" required style="width: 18px; height: 18px;">
                    <span style="color: rgba(255,255,255,0.8);">Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="#" style="color: var(--gold);">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a></span>
                </label>
            </div>
            
            <!-- Ø²Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
            <button type="submit" class="register-btn" id="submitBtn">
                Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
            </button>
            
            <!-- Ø±Ø§Ø¨Ø· ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <div class="register-link">
                <p>Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a href="login.html">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></p>
            </div>
        </form>
    </div>

    <script>
        // ===== Ù†Ø¸Ø§Ù… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ - Ù†Ø¸ÙŠÙ ÙˆØ®Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ =====
        
        // 1. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
        const registerForm = document.getElementById('registerForm');
        const submitBtn = document.getElementById('submitBtn');
        const alertDiv = document.getElementById('alert');
        
        // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        if (!registerForm) {
            console.error('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬');
        } else {
            console.log('âœ… Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…ÙˆØ¬ÙˆØ¯ ÙˆØ¬Ø§Ù‡Ø²');
        }
        
        // 3. ÙˆØ¸ÙŠÙØ© Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        document.querySelectorAll('.toggle-password').forEach(btn => {
            btn.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                const input = document.getElementById(targetId);
                if (input) {
                    const type = input.type === 'password' ? 'text' : 'password';
                    input.type = type;
                    this.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ';
                }
            });
        });
        
        // 4. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        const passwordInput = document.getElementById('password');
        if (passwordInput) {
            passwordInput.addEventListener('input', function() {
                checkPasswordStrength(this.value);
            });
        }
        
        function checkPasswordStrength(password) {
            let strength = 0;
            const bars = ['strength1', 'strength2', 'strength3', 'strength4'];
            const texts = ['Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹', 'Ø¶Ø¹ÙŠÙØ©', 'Ø¬ÙŠØ¯Ø©', 'Ù‚ÙˆÙŠØ©', 'Ù‚ÙˆÙŠØ© Ø¬Ø¯Ø§Ù‹'];
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø´Ø±Ø·Ø©
            bars.forEach(barId => {
                const bar = document.getElementById(barId);
                if (bar) bar.style.background = 'rgba(255, 255, 255, 0.2)';
            });
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙˆØ©
            if (password.length >= 6) strength = 1;
            if (password.length >= 8) strength = 2;
            if (password.length >= 8 && /[0-9]/.test(password)) strength = 3;
            if (password.length >= 10 && /[0-9]/.test(password) && /[A-Z]/.test(password)) strength = 4;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø´Ø±Ø·Ø©
            for (let i = 0; i < strength; i++) {
                const bar = document.getElementById(bars[i]);
                if (bar) {
                    if (strength === 1) bar.style.background = 'var(--error)';
                    else if (strength === 2) bar.style.background = 'var(--warning)';
                    else bar.style.background = 'var(--success)';
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ
            const strengthText = document.getElementById('strengthText');
            if (strengthText) {
                strengthText.textContent = texts[strength];
                if (strength === 1) strengthText.style.color = 'var(--error)';
                else if (strength === 2) strengthText.style.color = 'var(--warning)';
                else if (strength >= 3) strengthText.style.color = 'var(--success)';
            }
        }
        
        // 5. ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
        function showError(fieldId, message) {
            const errorDiv = document.getElementById(fieldId + 'Error');
            const inputField = document.getElementById(fieldId);
            
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
            }
            
            if (inputField) {
                inputField.classList.add('error');
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
                inputField.addEventListener('input', function() {
                    this.classList.remove('error');
                    const errorElement = document.getElementById(this.id + 'Error');
                    if (errorElement) {
                        errorElement.style.display = 'none';
                    }
                });
            }
        }
        
        function showAlert(message, type = 'success') {
            alertDiv.textContent = message;
            alertDiv.className = `alert alert-${type}`;
            alertDiv.style.display = 'block';
            
            setTimeout(() => {
                alertDiv.style.display = 'none';
            }, 5000);
        }
        
        function clearErrors() {
            document.querySelectorAll('.error-message').forEach(el => {
                el.textContent = '';
                el.style.display = 'none';
            });
            
            document.querySelectorAll('.form-input').forEach(input => {
                input.classList.remove('error');
            });
        }
        
        // 6. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function validateForm() {
            clearErrors();
            
            const pubgId = document.getElementById('pubgId').value.trim();
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            let isValid = true;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¹Ø±Ù Ø§Ù„Ø¨Ø¨Ø¬ÙŠ
            if (!pubgId) {
                showError('pubgId', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ø¨Ø¨Ø¬ÙŠ');
                isValid = false;
            } else if (!/^\d{10}$/.test(pubgId)) {
                showError('pubgId', 'ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 10 Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·');
                isValid = false;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            if (!username) {
                showError('username', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                isValid = false;
            } else if (username.length < 3) {
                showError('username', 'ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                isValid = false;
            } else if (!/^[a-zA-Z0-9_]+$/.test(username)) {
                showError('username', 'ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø­Ø±Ù Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ÙˆØ£Ø±Ù‚Ø§Ù… Ùˆ _ ÙÙ‚Ø·');
                isValid = false;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
            if (!password) {
                showError('password', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
                isValid = false;
            } else if (password.length < 6) {
                showError('password', 'ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                isValid = false;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
            if (!confirmPassword) {
                showError('confirmPassword', 'ÙŠØ±Ø¬Ù‰ ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
                isValid = false;
            } else if (password !== confirmPassword) {
                showError('confirmPassword', 'ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©');
                isValid = false;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·
            if (!agreeTerms) {
                showAlert('ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…', 'error');
                isValid = false;
            }
            
            return isValid;
        }
        
        // 7. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function checkDuplicateData(username, pubgId) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const usernameExists = users.some(user => user.username.toLowerCase() === username.toLowerCase());
            if (usernameExists) {
                return { exists: true, field: 'username', message: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„' };
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¹Ø±Ù Ø§Ù„Ø¨Ø¨Ø¬ÙŠ
            const pubgIdExists = users.some(user => user.pubgId === pubgId);
            if (pubgIdExists) {
                return { exists: true, field: 'pubgId', message: 'Ù…Ø¹Ø±Ù Ø§Ù„Ø¨Ø¨Ø¬ÙŠ Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„' };
            }
            
            return { exists: false };
        }
        
        // 8. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
        function createNewUser(pubgId, username, password) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            const newUser = {
                id: Date.now(),
                pubgId: pubgId,
                username: username,
                password: password,
                joinDate: new Date().toISOString(),
                stats: {
                    matches: 0,
                    wins: 0,
                    kills: 0,
                    kd: 0.0
                }
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            return newUser;
        }
        
        // 9. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        if (registerForm) {
            registerForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
                
                console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...');
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                if (!validateForm()) {
                    console.log('âŒ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙØ´Ù„');
                    return;
                }
                
                // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const pubgId = document.getElementById('pubgId').value.trim();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… Ø§Ù„ØªÙƒØ±Ø§Ø±
                const duplicateCheck = checkDuplicateData(username, pubgId);
                if (duplicateCheck.exists) {
                    showError(duplicateCheck.field, duplicateCheck.message);
                    return;
                }
                
                // ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ø²Ø±
                submitBtn.disabled = true;
                submitBtn.textContent = 'Ø¬Ø§Ø±Ù Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...';
                
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
                setTimeout(() => {
                    try {
                        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
                        const newUser = createNewUser(pubgId, username, password);
                        
                        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
                        localStorage.setItem('currentUser', JSON.stringify({
                            id: newUser.id,
                            username: newUser.username,
                            pubgId: newUser.pubgId,
                            joinDate: newUser.joinDate
                        }));
                        
                        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                        showAlert('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                        
                        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                        registerForm.reset();
                        
                        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ±
                        setTimeout(() => {
                            window.location.href = 'main.html';
                        }, 1500);
                        
                    } catch (error) {
                        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨:', error);
                        showAlert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨', 'error');
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨';
                    }
                }, 1000);
            });
        }
        
        // 10. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ ØµÙØ­Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø­Ù…Ù„Ø©');
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            if (!localStorage.getItem('users')) {
                const defaultUsers = [
                    {
                        id: 1,
                        username: 'admin',
                        password: 'admin123',
                        pubgId: '5123456789',
                        joinDate: new Date().toISOString()
                    }
                ];
                localStorage.setItem('users', JSON.stringify(defaultUsers));
                console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†');
            }
            
            // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø£ÙˆÙ„ Ø­Ù‚Ù„
            document.getElementById('pubgId').focus();
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && e.target.type !== 'textarea') {
                    e.preventDefault();
                    if (e.target.type !== 'submit') {
                        const form = e.target.closest('form');
                        if (form) {
                            const submitBtn = form.querySelector('button[type="submit"]');
                            if (submitBtn) {
                                submitBtn.click();
                            }
                        }
                    }
                }
            });
        });
        
        // 11. ÙˆØ¸ÙŠÙØ© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† localStorage
        function checkLocalStorage() {
            console.log('ğŸ“¦ Ø­Ø§Ù„Ø© localStorage:');
            console.log('ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†:', JSON.parse(localStorage.getItem('users'))?.length || 0);
            console.log('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', localStorage.getItem('currentUser'));
        }
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù‚Ù‚
        checkLocalStorage();
    </script>
</body>
</html>
